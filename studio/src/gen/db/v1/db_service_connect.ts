//*
// @file db/v1/database.proto
// @description The definitive gRPC contract for the sqlite-server service.
//
// ARCHITECTURAL DESIGN:
//
// 1. DUAL TRANSACTION MODELS:
//    - Streaming (Bidirectional): Best for short, interactive sessions where
// the connection lifespan equals the transaction lifespan. Automatic rollback
// on disconnect.
//    - Unary (ID-Based): Best for stateless HTTP clients or long-running
// workflows where holding a TCP connection open is brittle. Requires manual
// 'Begin'/'Commit' and relies on server-side Timeouts (TTL) to clean up
// "Zombie" transactions.
//
// 2. TYPE SAFETY (SPARSE HINTS):
//    Since JSON/Protobuf lacks native support for some SQLite types (like BLOBs
// or large Integers), we use a "Hint" system. The client sends data as standard
// JSON types but provides a mapping (e.g., "param 0 is a BLOB") so the server
// knows to decode Base64 before hitting the DB.
//
// 3. ERROR FIDELITY:
//    We map native C SQLite result codes to a Proto Enum (`SqliteCode`). This
// allows clients to programmatically react to specific errors (e.g., retrying
// on SQLITE_BUSY) without parsing error string messages.

// @generated by protoc-gen-connect-es v1.6.1 with parameter "target=ts"
// @generated from file db/v1/db_service.proto (package db.v1, syntax proto3)
/* eslint-disable */
// @ts-nocheck

import { AttachDatabaseRequest, AttachDatabaseResponse, BeginTransactionRequest, BeginTransactionResponse, CheckpointRequest, CheckpointResponse, CreateApiKeyRequest, CreateApiKeyResponse, CreateDatabaseRequest, CreateDatabaseResponse, CreateUserRequest, CreateUserResponse, DatabaseConfig, DatabaseSchema, DeleteDatabaseRequest, DeleteDatabaseResponse, DeleteUserRequest, DeleteUserResponse, DetachDatabaseRequest, DetachDatabaseResponse, ExecuteTransactionRequest, ExecuteTransactionResponse, ExplainResponse, GetDatabaseSchemaRequest, GetTableSchemaRequest, IntegrityCheckRequest, IntegrityCheckResponse, ListApiKeysRequest, ListApiKeysResponse, ListDatabasesRequest, ListDatabasesResponse, ListExtensionsRequest, ListExtensionsResponse, ListTablesRequest, ListTablesResponse, ListUsersRequest, ListUsersResponse, LoadExtensionRequest, LoadExtensionResponse, LoginRequest, LoginResponse, LogoutRequest, LogoutResponse, MountDatabaseResponse, QueryRequest, QueryResponse, QueryResult, RevokeApiKeyRequest, RevokeApiKeyResponse, SavepointResponse, TableSchema, TransactionControlRequest, TransactionControlResponse, TransactionQueryRequest, TransactionRequest, TransactionResponse, TransactionSavepointRequest, TypedQueryRequest, TypedQueryResponse, TypedQueryResult, TypedTransactionQueryRequest, UnMountDatabaseRequest, UnMountDatabaseResponse, UpdateDatabaseRequest, UpdateDatabaseResponse, UpdatePasswordRequest, UpdatePasswordResponse, UpdateUserRoleRequest, UpdateUserRoleResponse, VacuumRequest, VacuumResponse } from "./db_service_pb.js";
import { MethodKind } from "@bufbuild/protobuf";

/**
 * buf:lint:ignore RPC_REQUEST_RESPONSE_UNIQUE
 * buf:lint:ignore RPC_REQUEST_STANDARD_NAME
 * buf:lint:ignore RPC_RESPONSE_STANDARD_NAME
 *
 * --- Stateless Operations ---
 *
 * @generated from service db.v1.DatabaseService
 */
export const DatabaseService = {
  typeName: "db.v1.DatabaseService",
  methods: {
    /**
     * *
     * Executes a single stateless query and returns the entire result.
     * Best for point-lookups (SELECT ... WHERE id=?).
     * 
     * WARNING: The server enforces a hard limit on row count (e.g., 1000) for
     * this RPC. For larger datasets, use `QueryStream`.
     *
     * @generated from rpc db.v1.DatabaseService.Query
     */
    query: {
      name: "Query",
      I: QueryRequest,
      O: QueryResult,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Executes a stateless query and streams results.
     * Safe for large exports or reporting queries.
     * Protocol: Header -> Batch... -> Batch... -> Complete
     *
     * @generated from rpc db.v1.DatabaseService.QueryStream
     */
    queryStream: {
      name: "QueryStream",
      I: QueryRequest,
      O: QueryResponse,
      kind: MethodKind.ServerStreaming,
    },
    /**
     * *
     * Opens a stateful bidirectional stream for transactions.
     * 
     * Flow:
     * 1. Client sends `BeginRequest`
     * 2. Client sends multiple `TransactionalQueryRequest`
     * 3. Client sends `Commit` or `Rollback`
     *
     * @generated from rpc db.v1.DatabaseService.Transaction
     */
    transaction: {
      name: "Transaction",
      I: TransactionRequest,
      O: TransactionResponse,
      kind: MethodKind.BiDiStreaming,
    },
    /**
     * *
     * Starts a new transaction context on the server and returns a
     * 'transaction_id'. The server holds the connection open in memory until
     * Commit, Rollback, or Timeout.
     *
     * @generated from rpc db.v1.DatabaseService.BeginTransaction
     */
    beginTransaction: {
      name: "BeginTransaction",
      I: BeginTransactionRequest,
      O: BeginTransactionResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Executes a query inside the context of an existing 'transaction_id'.
     * If the ID is invalid or timed out, returns NOT_FOUND.
     *
     * @generated from rpc db.v1.DatabaseService.TransactionQuery
     */
    transactionQuery: {
      name: "TransactionQuery",
      I: TransactionQueryRequest,
      O: QueryResult,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Executes a query inside the context of an existing 'transaction_id'.
     * The server will stream the results back to the client.
     * If the ID is invalid or timed out, returns NOT_FOUND.
     *
     * @generated from rpc db.v1.DatabaseService.TransactionQueryStream
     */
    transactionQueryStream: {
      name: "TransactionQueryStream",
      I: TransactionQueryRequest,
      O: QueryResponse,
      kind: MethodKind.ServerStreaming,
    },
    /**
     * *
     * Manages a savepoint (nested transaction) within an existing transaction ID.
     * If the ID is invalid or timed out, returns NOT_FOUND.
     *
     * @generated from rpc db.v1.DatabaseService.TransactionSavepoint
     */
    transactionSavepoint: {
      name: "TransactionSavepoint",
      I: TransactionSavepointRequest,
      O: SavepointResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Commits the transaction associated with the ID and releases server
     * resources.
     *
     * @generated from rpc db.v1.DatabaseService.CommitTransaction
     */
    commitTransaction: {
      name: "CommitTransaction",
      I: TransactionControlRequest,
      O: TransactionControlResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Rolls back the transaction associated with the ID and releases server
     * resources.
     *
     * @generated from rpc db.v1.DatabaseService.RollbackTransaction
     */
    rollbackTransaction: {
      name: "RollbackTransaction",
      I: TransactionControlRequest,
      O: TransactionControlResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Executes a predefined script of commands atomically.
     * Useful for migrations or testing where interactivity is not required.
     *
     * @generated from rpc db.v1.DatabaseService.ExecuteTransaction
     */
    executeTransaction: {
      name: "ExecuteTransaction",
      I: ExecuteTransactionRequest,
      O: ExecuteTransactionResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Executes a single stateless query and returns the entire result with
     * strongly-typed values. Eliminates the need for sparse type hints.
     *
     * @generated from rpc db.v1.DatabaseService.TypedQuery
     */
    typedQuery: {
      name: "TypedQuery",
      I: TypedQueryRequest,
      O: TypedQueryResult,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Executes a stateless query and streams strongly-typed results.
     * Protocol: TypedHeader -> TypedBatch... -> Complete
     *
     * @generated from rpc db.v1.DatabaseService.TypedQueryStream
     */
    typedQueryStream: {
      name: "TypedQueryStream",
      I: TypedQueryRequest,
      O: TypedQueryResponse,
      kind: MethodKind.ServerStreaming,
    },
    /**
     * *
     * Executes a typed query inside the context of an existing 'transaction_id'.
     *
     * @generated from rpc db.v1.DatabaseService.TypedTransactionQuery
     */
    typedTransactionQuery: {
      name: "TypedTransactionQuery",
      I: TypedTransactionQueryRequest,
      O: TypedQueryResult,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Executes a typed query inside the context of an existing 'transaction_id'.
     * The server will stream the typed results back to the client.
     *
     * @generated from rpc db.v1.DatabaseService.TypedTransactionQueryStream
     */
    typedTransactionQueryStream: {
      name: "TypedTransactionQueryStream",
      I: TypedTransactionQueryRequest,
      O: TypedQueryResponse,
      kind: MethodKind.ServerStreaming,
    },
    /**
     * *
     * Returns structured EXPLAIN QUERY PLAN output as a tree.
     * Helps developers understand index usage and optimization opportunities.
     *
     * @generated from rpc db.v1.DatabaseService.Explain
     */
    explain: {
      name: "Explain",
      I: QueryRequest,
      O: ExplainResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Typed variant of Explain using strongly-typed parameters.
     * Returns the same structured EXPLAIN QUERY PLAN output.
     *
     * @generated from rpc db.v1.DatabaseService.TypedExplain
     */
    typedExplain: {
      name: "TypedExplain",
      I: TypedQueryRequest,
      O: ExplainResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Returns a light listing of all tables in the database.
     * Useful for UI dropdowns and quick navigation.
     *
     * @generated from rpc db.v1.DatabaseService.ListTables
     */
    listTables: {
      name: "ListTables",
      I: ListTablesRequest,
      O: ListTablesResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Returns detailed schema for a single table.
     * Includes columns, indexes, foreign keys, and triggers.
     *
     * @generated from rpc db.v1.DatabaseService.GetTableSchema
     */
    getTableSchema: {
      name: "GetTableSchema",
      I: GetTableSchemaRequest,
      O: TableSchema,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Returns the full database schema for exports/migrations.
     * Aggregates all tables with their complete schema information.
     *
     * @generated from rpc db.v1.DatabaseService.GetDatabaseSchema
     */
    getDatabaseSchema: {
      name: "GetDatabaseSchema",
      I: GetDatabaseSchemaRequest,
      O: DatabaseSchema,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Triggers a VACUUM command to rebuild the database file.
     * Can also perform VACUUM INTO to create a backup/copy.
     *
     * @generated from rpc db.v1.DatabaseService.Vacuum
     */
    vacuum: {
      name: "Vacuum",
      I: VacuumRequest,
      O: VacuumResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Manages WAL checkpoints (transferring WAL content to the main DB file).
     *
     * @generated from rpc db.v1.DatabaseService.Checkpoint
     */
    checkpoint: {
      name: "Checkpoint",
      I: CheckpointRequest,
      O: CheckpointResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Runs an integrity check on the database.
     *
     * @generated from rpc db.v1.DatabaseService.IntegrityCheck
     */
    integrityCheck: {
      name: "IntegrityCheck",
      I: IntegrityCheckRequest,
      O: IntegrityCheckResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Dynamically attaches a database file to an existing managed database.
     * This updates the configuration and reloads the connections.
     *
     * @generated from rpc db.v1.DatabaseService.AttachDatabase
     */
    attachDatabase: {
      name: "AttachDatabase",
      I: AttachDatabaseRequest,
      O: AttachDatabaseResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Detaches a database from a managed database.
     * This updates the configuration and reloads the connections.
     *
     * @generated from rpc db.v1.DatabaseService.DetachDatabase
     */
    detachDatabase: {
      name: "DetachDatabase",
      I: DetachDatabaseRequest,
      O: DetachDatabaseResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Returns a list of available SQLite extensions found in the server's
     * extension directory. Extensions are filtered by compatibility with the
     * current OS and architecture.
     *
     * @generated from rpc db.v1.DatabaseService.ListExtensions
     */
    listExtensions: {
      name: "ListExtensions",
      I: ListExtensionsRequest,
      O: ListExtensionsResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Loads a compatible SQLite extension into the specified database.
     * This updates the database configuration and reloads connections.
     *
     * @generated from rpc db.v1.DatabaseService.LoadExtension
     */
    loadExtension: {
      name: "LoadExtension",
      I: LoadExtensionRequest,
      O: LoadExtensionResponse,
      kind: MethodKind.Unary,
    },
  }
} as const;

/**
 * *
 * AdminService handles restricted operations for user management and system
 * maintenance. Access to this service MUST be restricted to the 'admin' role.
 *
 * --- User Management ---
 *
 * @generated from service db.v1.AdminService
 */
export const AdminService = {
  typeName: "db.v1.AdminService",
  methods: {
    /**
     * *
     * Creates a new user with specific role-based access.
     * Requires admin privileges.
     *
     * @generated from rpc db.v1.AdminService.CreateUser
     */
    createUser: {
      name: "CreateUser",
      I: CreateUserRequest,
      O: CreateUserResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Permanently removes a user from the system.
     * Existing connections for this user may be terminated.
     *
     * @generated from rpc db.v1.AdminService.DeleteUser
     */
    deleteUser: {
      name: "DeleteUser",
      I: DeleteUserRequest,
      O: DeleteUserResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Rotates the password for a specific user.
     * The new password takes effect immediately for new connections.
     *
     * @generated from rpc db.v1.AdminService.UpdatePassword
     */
    updatePassword: {
      name: "UpdatePassword",
      I: UpdatePasswordRequest,
      O: UpdatePasswordResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Generates a long-lived API key for a specific user.
     * The key is only returned once in the response.
     *
     * @generated from rpc db.v1.AdminService.CreateApiKey
     */
    createApiKey: {
      name: "CreateApiKey",
      I: CreateApiKeyRequest,
      O: CreateApiKeyResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Retrieves all active API keys for a specific user.
     * Returns metadata (name, prefix) but not the full key secrets.
     *
     * @generated from rpc db.v1.AdminService.ListApiKeys
     */
    listApiKeys: {
      name: "ListApiKeys",
      I: ListApiKeysRequest,
      O: ListApiKeysResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Retrieves all active users.
     * Requires admin privileges.
     *
     * @generated from rpc db.v1.AdminService.ListUsers
     */
    listUsers: {
      name: "ListUsers",
      I: ListUsersRequest,
      O: ListUsersResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Updates the role of a specific user.
     * Requires admin privileges.
     *
     * @generated from rpc db.v1.AdminService.UpdateUserRole
     */
    updateUserRole: {
      name: "UpdateUserRole",
      I: UpdateUserRoleRequest,
      O: UpdateUserRoleResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Lists all available databases.
     *
     * @generated from rpc db.v1.AdminService.ListDatabases
     */
    listDatabases: {
      name: "ListDatabases",
      I: ListDatabasesRequest,
      O: ListDatabasesResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Authenticates a user and returns a session API key.
     * Requires Basic Auth for the initial request.
     *
     * @generated from rpc db.v1.AdminService.Login
     */
    login: {
      name: "Login",
      I: LoginRequest,
      O: LoginResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Invalidates the current session/API key.
     *
     * @generated from rpc db.v1.AdminService.Logout
     */
    logout: {
      name: "Logout",
      I: LogoutRequest,
      O: LogoutResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Revokes (deletes) a specific API key immediately.
     *
     * @generated from rpc db.v1.AdminService.RevokeApiKey
     */
    revokeApiKey: {
      name: "RevokeApiKey",
      I: RevokeApiKeyRequest,
      O: RevokeApiKeyResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Creates a new managed database.
     * The database file is created in the server's managed directory.
     *
     * @generated from rpc db.v1.AdminService.CreateDatabase
     */
    createDatabase: {
      name: "CreateDatabase",
      I: CreateDatabaseRequest,
      O: CreateDatabaseResponse,
      kind: MethodKind.Unary,
    },
    /**
     * buf:lint:ignore RPC_REQUEST_STANDARD_NAME
     *
     * @generated from rpc db.v1.AdminService.MountDatabase
     */
    mountDatabase: {
      name: "MountDatabase",
      I: DatabaseConfig,
      O: MountDatabaseResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Unmounts a database, removing it from the active server.
     * The file is NOT deleted.
     *
     * @generated from rpc db.v1.AdminService.UnMountDatabase
     */
    unMountDatabase: {
      name: "UnMountDatabase",
      I: UnMountDatabaseRequest,
      O: UnMountDatabaseResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Deletes a database securely.
     * - Managed DBs: Deleted from disk and metadata.
     * - Mounted DBs: Returns error (protects external files).
     *
     * @generated from rpc db.v1.AdminService.DeleteDatabase
     */
    deleteDatabase: {
      name: "DeleteDatabase",
      I: DeleteDatabaseRequest,
      O: DeleteDatabaseResponse,
      kind: MethodKind.Unary,
    },
    /**
     * *
     * Updates an existing database configuration.
     * Useful for changing settings like init_commands, max_open_conns, etc.
     * This operation forces a reload of the database connections.
     *
     * @generated from rpc db.v1.AdminService.UpdateDatabase
     */
    updateDatabase: {
      name: "UpdateDatabase",
      I: UpdateDatabaseRequest,
      O: UpdateDatabaseResponse,
      kind: MethodKind.Unary,
    },
  }
} as const;


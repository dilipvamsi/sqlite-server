---

---

<header class="header-nav">
  <div class="logo">
    <a href="/studio/">SQLite Studio</a>
  </div>
  <nav class="main-nav">
    <a href="/studio/" class="nav-link">Databases</a>
    <a href="/studio/users" class="nav-link">Users</a>
    <a href="/studio/extensions" class="nav-link">Extensions</a>
  </nav>
  <div class="user-menu">
    <button id="logout-btn" class="btn btn-ghost">Logout</button>
  </div>
</header>

<script>
  import { performLogout, isAdmin, getUsername } from "../lib/client";

  const logoutBtn = document.getElementById("logout-btn");
  logoutBtn?.addEventListener("click", async () => {
    if (confirm("Are you sure you want to logout?")) {
      await performLogout();
    }
  });

  // Role-based UI adjustments
  const usersLink = document.querySelector('.nav-link[href="/studio/users"]');
  if (usersLink && !isAdmin()) {
    const username = getUsername();
    usersLink.textContent = "Manage User";
    const href = username
      ? `/studio/manage-user?username=${username}`
      : "/studio/manage-user";
    usersLink.setAttribute("href", href);
  }
</script>

<style>
  .header-nav {
    display: flex;
    align-items: center;
    padding: 1rem 2rem;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
  }

  .logo {
    font-weight: 600;
    font-size: 1.1rem;
    margin-right: 2rem;
  }

  .logo a {
    color: var(--text-primary);
    text-decoration: none;
  }

  .main-nav {
    display: flex;
    gap: 1.5rem;
    margin-right: auto;
  }

  .nav-link {
    color: var(--text-secondary);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s;
  }

  .nav-link:hover,
  .nav-link[href^="/studio/users"]:global(.active) {
    /* Simple active matching - can be improved if needed */
    color: var(--accent-color);
  }

  /* Naive active state highlighting based on URL */
  :global(:root):has(body) .nav-link[href="/studio/"] {
    color: var(--text-secondary); /* Default */
  }
</style>

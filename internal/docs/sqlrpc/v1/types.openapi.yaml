openapi: 3.1.0
info:
  title: sqlrpc.v1
paths: {}
components:
  schemas:
    google.protobuf.ListValue:
      type: object
      properties:
        values:
          type: array
          items:
            $ref: '#/components/schemas/google.protobuf.Value'
          title: values
          description: Repeated field of dynamically typed values.
      title: ListValue
      additionalProperties: false
      description: |-
        `ListValue` is a wrapper around a repeated field of values.

         The JSON representation for `ListValue` is JSON array.
    google.protobuf.NullValue:
      type: string
      title: NullValue
      enum:
        - NULL_VALUE
      description: |-
        `NullValue` is a singleton enumeration to represent the null value for the
         `Value` type union.

         The JSON representation for `NullValue` is JSON `null`.
    google.protobuf.Struct:
      type: object
      additionalProperties:
        $ref: '#/components/schemas/google.protobuf.Value'
      description: |-
        `Struct` represents a structured data value, consisting of fields
         which map to dynamically typed values. In some languages, `Struct`
         might be supported by a native representation. For example, in
         scripting languages like JS a struct is represented as an
         object. The details of that representation are described together
         with the proto support for the language.

         The JSON representation for `Struct` is JSON object.
    google.protobuf.Struct.FieldsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          title: value
          $ref: '#/components/schemas/google.protobuf.Value'
      title: FieldsEntry
      additionalProperties: false
    google.protobuf.Value:
      oneOf:
        - type: "null"
        - type: number
        - type: string
        - type: boolean
        - type: array
        - type: object
          additionalProperties: true
      description: |-
        `Value` represents a dynamically typed value which can be either
         null, a number, a string, a boolean, a recursive struct value, or a
         list of values. A producer of value is expected to set one of these
         variants. Absence of any variant indicates an error.

         The JSON representation for `Value` is JSON value.
    sqlrpc.v1.Attachment:
      type: object
      properties:
        targetDatabaseName:
          type: string
          title: target_database_name
          maxLength: 64
          minLength: 3
          pattern: ^[a-zA-Z0-9_-]+$
          description: Name of the tenant database to attach.
        alias:
          type: string
          title: alias
          maxLength: 64
          minLength: 1
          pattern: ^[a-zA-Z0-9_-]+$
          description: Schema alias to prefix queries (e.g. ATTACH AS <alias>).
      title: Attachment
      additionalProperties: false
      description: |-
        *
         Attachment defines a dynamic mounting of a secondary database into a
         connection.
    sqlrpc.v1.AttachmentList:
      type: object
      properties:
        values:
          type: array
          items:
            $ref: '#/components/schemas/sqlrpc.v1.Attachment'
          title: values
          description: Collection of attachment configurations.
      title: AttachmentList
      additionalProperties: false
      description: |-
        *
         AttachmentList provides a wrapper for a collection of database attachments.
    sqlrpc.v1.ColumnAffinity:
      type: string
      title: ColumnAffinity
      enum:
        - COLUMN_AFFINITY_UNSPECIFIED
        - COLUMN_AFFINITY_INTEGER
        - COLUMN_AFFINITY_TEXT
        - COLUMN_AFFINITY_BLOB
        - COLUMN_AFFINITY_REAL
        - COLUMN_AFFINITY_NUMERIC
      description: |-
        *
         ColumnAffinity defines the storage preference for a column in SQLite.
    sqlrpc.v1.ColumnSchema:
      type: object
      properties:
        name:
          type: string
          title: name
          description: Logical name of the column.
        type:
          type: string
          title: type
          description: Explicit data type declaration.
        notNull:
          type: boolean
          title: not_null
          description: True if the column prohibits NULL values.
        defaultValue:
          type: string
          title: default_value
          description: Default value expression for the column.
        primaryKey:
          type: boolean
          title: primary_key
          description: True if the column participates in the primary key.
      title: ColumnSchema
      additionalProperties: false
      description: |-
        *
         ColumnSchema describes the constraints and metadata for a single column.
    sqlrpc.v1.DatabaseConfig:
      type: object
      properties:
        name:
          type: string
          title: name
          maxLength: 64
          minLength: 3
          pattern: ^[a-zA-Z0-9_-]+$
          description: Logical tenant identifier.
        dbPath:
          type: string
          title: db_path
          minLength: 1
          description: Target path for the database file.
        isEncrypted:
          type: boolean
          title: is_encrypted
          description: If true, provisions the database via sqlcipher (encryption).
        key:
          type: string
          title: key
          description: Master key for encrypted databases.
        readOnly:
          type: boolean
          title: read_only
          description: Locks the entire tenant to read-only semantics if true.
        extensions:
          type: array
          items:
            type: string
          title: extensions
          description: Pre-approved extension folder names to load upon connection.
        pragmas:
          type: object
          title: pragmas
          additionalProperties:
            type: string
            title: value
          description: Map of native SQLite PRAGMAs to apply globally.
        maxOpenConns:
          type: integer
          title: max_open_conns
          format: int32
          description: Maximum concurrent connections allowed for this tenant.
        maxIdleConns:
          type: integer
          title: max_idle_conns
          format: int32
          description: Maximum idle connections stored in the pool.
        connMaxLifetimeMs:
          type: integer
          title: conn_max_lifetime_ms
          format: int32
          description: Lifetime limit for individual physical connections.
        initCommands:
          type: array
          items:
            type: string
          title: init_commands
          description: SQL commands to execute upon every connection initialize.
        attachments:
          type: array
          items:
            $ref: '#/components/schemas/sqlrpc.v1.Attachment'
          title: attachments
          description: Persistent database attachments.
      title: DatabaseConfig
      additionalProperties: false
      description: |-
        *
         DatabaseConfig defines the lifecycle and structural settings for a database
         tenant.
    sqlrpc.v1.DatabaseConfig.PragmasEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: PragmasEntry
      additionalProperties: false
    sqlrpc.v1.DatabaseInfo:
      type: object
      properties:
        name:
          type: string
          title: name
          description: Logical tenant identifier.
        path:
          type: string
          title: path
          description: Absolute path to the underlying SQLite file.
        isManaged:
          type: boolean
          title: is_managed
          description: True if the database is registered in the platform's control plane.
        currentAttachments:
          type: array
          items:
            $ref: '#/components/schemas/sqlrpc.v1.Attachment'
          title: current_attachments
          description: List of databases currently attached to this connection.
        readOnly:
          type: boolean
          title: read_only
          description: If true, the database is mounted in strictly read-only mode.
        loadedExtensions:
          type: array
          items:
            type: string
          title: loaded_extensions
          description: List of managed extension identifiers currently loaded.
      title: DatabaseInfo
      additionalProperties: false
      description: |-
        *
         DatabaseInfo describes the current state and metadata for a managed tenant
         database.
    sqlrpc.v1.DatabaseSchema:
      type: object
      properties:
        tables:
          type: array
          items:
            $ref: '#/components/schemas/sqlrpc.v1.TableSchema'
          title: tables
          description: Catalog of tables and their associated structures.
      title: DatabaseSchema
      additionalProperties: false
      description: |-
        *
         DatabaseSchema represents the entire structured catalog for a database
         tenant.
    sqlrpc.v1.ExecutionStats:
      type: object
      properties:
        durationMs:
          type: number
          title: duration_ms
          format: double
          description: Total execution time in milliseconds.
        rowsRead:
          type:
            - integer
            - string
          title: rows_read
          format: int64
          description: Number of rows read during query execution.
        rowsWritten:
          type:
            - integer
            - string
          title: rows_written
          format: int64
          description: Number of rows modified during mutation execution (Exec).
      title: ExecutionStats
      additionalProperties: false
      description: |-
        *
         ExecutionStats provides performance telemetry for a completed operation.
    sqlrpc.v1.ExtensionInfo:
      type: object
      properties:
        name:
          type: string
          title: name
          description: Human-readable name of the extension.
        version:
          type: string
          title: version
          description: semantic version string.
        folderName:
          type: string
          title: folder_name
          description: Folder name in the platform's extensions directory.
        isLoaded:
          type: boolean
          title: is_loaded
          description: True if currently loaded into the connection.
        filePath:
          type: string
          title: file_path
          description: Physical path to the .so/.dylib/.dll file.
        description:
          type: string
          title: description
          description: Brief description of the extension functionality.
        documentationUrl:
          type: string
          title: documentation_url
          description: URL pointing to the extension's documentation.
      title: ExtensionInfo
      additionalProperties: false
      description: |-
        *
         ExtensionInfo describes a discoverable SQLite extension available in the
         platform.
    sqlrpc.v1.ExtensionList:
      type: object
      properties:
        values:
          type: array
          items:
            type: string
          title: values
          description: Collection of extension folder names.
      title: ExtensionList
      additionalProperties: false
      description: |-
        *
         ExtensionList provides a wrapper for a collection of extension identifiers.
    sqlrpc.v1.ForeignKeySchema:
      type: object
      properties:
        id:
          type: integer
          title: id
          format: int32
          description: Internal constraint identifier.
        table:
          type: string
          title: table
          description: Name of the target table.
        fromColumn:
          type: string
          title: from_column
          description: Source column in the current table.
        toColumn:
          type: string
          title: to_column
          description: Referenced column in the target table.
        onUpdate:
          type: string
          title: on_update
          description: Referential action to perform on parent update.
        onDelete:
          type: string
          title: on_delete
          description: Referential action to perform on parent deletion.
      title: ForeignKeySchema
      additionalProperties: false
      description: |-
        *
         ForeignKeySchema describes a referential integrity constraint.
    sqlrpc.v1.IndexSchema:
      type: object
      properties:
        name:
          type: string
          title: name
          description: Unique name of the index entity.
        unique:
          type: boolean
          title: unique
          description: True if the index enforces uniqueness.
        columns:
          type: array
          items:
            type: string
          title: columns
          description: Ordered list of columns included in the index.
        sql:
          type: string
          title: sql
          description: SQL definition for the index.
      title: IndexSchema
      additionalProperties: false
      description: |-
        *
         IndexSchema describes an index defined on a table.
    sqlrpc.v1.InitCommandList:
      type: object
      properties:
        values:
          type: array
          items:
            type: string
          title: values
          description: Collection of SQL statements to execute on initialization.
      title: InitCommandList
      additionalProperties: false
      description: |-
        *
         InitCommandList provides a wrapper for a collection of SQL initialization
         commands.
    sqlrpc.v1.Parameters:
      type: object
      properties:
        positional:
          type: array
          items:
            $ref: '#/components/schemas/google.protobuf.Value'
          title: positional
          description: Positional parameters bound by index (?).
        named:
          type: object
          title: named
          additionalProperties:
            title: value
            $ref: '#/components/schemas/google.protobuf.Value'
          description: Named parameters bound by key (:name, @name, $name).
        hints:
          type: object
          title: hints
          maxProperties: 1000
          additionalProperties:
            title: value
            $ref: '#/components/schemas/sqlrpc.v1.ColumnAffinity'
          description: Explicit type overrides for dynamic typing scenarios.
      title: Parameters
      additionalProperties: false
      description: |-
        *
         Parameters provides hybrid binds supporting standard google.protobuf.Value
         with optional affinity hints for the SQLite engine.
    sqlrpc.v1.Parameters.HintsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          title: value
          $ref: '#/components/schemas/sqlrpc.v1.ColumnAffinity'
      title: HintsEntry
      additionalProperties: false
    sqlrpc.v1.Parameters.NamedEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          title: value
          $ref: '#/components/schemas/google.protobuf.Value'
      title: NamedEntry
      additionalProperties: false
    sqlrpc.v1.PragmaMap:
      type: object
      properties:
        values:
          type: object
          title: values
          additionalProperties:
            type: string
            title: value
          description: Collection of key-value pairs representing PRAGMA settings.
      title: PragmaMap
      additionalProperties: false
      description: |-
        *
         PragmaMap provides a wrapper for a collection of SQLite PRAGMA settings.
    sqlrpc.v1.PragmaMap.ValuesEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: ValuesEntry
      additionalProperties: false
    sqlrpc.v1.QueryPlanNode:
      type: object
      properties:
        id:
          type: integer
          title: id
          format: int32
          description: Unique identifier for the plan node.
        parentId:
          type: integer
          title: parent_id
          format: int32
          description: Parent node identifier (enables tree reconstruction).
        detail:
          type: string
          title: detail
          description: Textual description of the query execution step.
      title: QueryPlanNode
      additionalProperties: false
      description: |-
        *
         QueryPlanNode represents a single step in a query execution plan.
    sqlrpc.v1.Role:
      type: string
      title: Role
      enum:
        - ROLE_UNSPECIFIED
        - ROLE_READ_ONLY
        - ROLE_READ_WRITE
        - ROLE_DATABASE_MANAGER
        - ROLE_ADMIN
      description: |-
        *
         Role defines the RBAC permission tier for a platform identity.
         Determines connection provisioning (e.g., Read-Only users receive strictly
         read-only connections).
    sqlrpc.v1.SqlRow:
      type: object
      properties:
        values:
          type: array
          items:
            $ref: '#/components/schemas/sqlrpc.v1.SqlValue'
          title: values
          description: Ordered collection of typed cells in the row.
      title: SqlRow
      additionalProperties: false
      description: |-
        *
         SqlRow represents a single record yielded by a Typed API query.
    sqlrpc.v1.SqlValue:
      type: object
      oneOf:
        - properties:
            blobValue:
              type: string
              title: blob_value
              format: byte
              description: Arbitrary sequence of binary data.
          title: blob_value
          required:
            - blobValue
        - properties:
            integerValue:
              type:
                - integer
                - string
              title: integer_value
              format: int64
              description: 64-bit signed integer value.
          title: integer_value
          required:
            - integerValue
        - properties:
            nullValue:
              type: boolean
              title: null_value
              description: Indicates a NULL/empty cell value in SQLite.
          title: null_value
          required:
            - nullValue
        - properties:
            realValue:
              type: number
              title: real_value
              format: double
              description: 64-bit IEEE 754 floating point value.
          title: real_value
          required:
            - realValue
        - properties:
            textValue:
              type: string
              title: text_value
              description: UTF-8 encoded sequence of characters.
          title: text_value
          required:
            - textValue
      title: SqlValue
      additionalProperties: false
      description: |-
        *
         SqlValue represents a strictly-typed SQLite cell value.
         This ensures data integrity by preventing implicit conversion to strings.
    sqlrpc.v1.TableSchema:
      type: object
      properties:
        name:
          type: string
          title: name
          description: Name of the table entity.
        sql:
          type: string
          title: sql
          description: Original SQL CREATE statement used to define the table.
        columns:
          type: array
          items:
            $ref: '#/components/schemas/sqlrpc.v1.ColumnSchema'
          title: columns
          description: Collection of column structural definitions.
        indexes:
          type: array
          items:
            $ref: '#/components/schemas/sqlrpc.v1.IndexSchema'
          title: indexes
          description: Collection of associated index definitions.
        foreignKeys:
          type: array
          items:
            $ref: '#/components/schemas/sqlrpc.v1.ForeignKeySchema'
          title: foreign_keys
          description: Referential integrity constraints.
        triggers:
          type: array
          items:
            $ref: '#/components/schemas/sqlrpc.v1.TriggerSchema'
          title: triggers
          description: Trigger definitions associated with the table.
      title: TableSchema
      additionalProperties: false
      description: |-
        *
         TableSchema delineates the full physical and logical structure of a table.
    sqlrpc.v1.TriggerSchema:
      type: object
      properties:
        name:
          type: string
          title: name
          description: Unique name of the trigger.
        sql:
          type: string
          title: sql
          description: SQL definition for the trigger.
      title: TriggerSchema
      additionalProperties: false
      description: |-
        *
         TriggerSchema describes a database trigger definition.
    sqlrpc.v1.TypedParameters:
      type: object
      properties:
        positional:
          type: array
          items:
            $ref: '#/components/schemas/sqlrpc.v1.SqlValue'
          title: positional
          maxItems: 1000
          description: Positional parameters bound by index (?).
        named:
          type: object
          title: named
          maxProperties: 1000
          additionalProperties:
            title: value
            $ref: '#/components/schemas/sqlrpc.v1.SqlValue'
          description: Named parameters bound by key (:name, @name, $name).
      title: TypedParameters
      additionalProperties: false
      description: |-
        *
         TypedParameters provides strictly-typed binds for prepared statements.
    sqlrpc.v1.TypedParameters.NamedEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          title: value
          $ref: '#/components/schemas/sqlrpc.v1.SqlValue'
      title: NamedEntry
      additionalProperties: false
    sqlrpc.v1.UpdateDatabaseConfig:
      type: object
      properties:
        readOnly:
          type:
            - boolean
            - "null"
          title: read_only
          description: Toggle read-only mode for the tenant.
        extensions:
          title: extensions
          description: Partial list of extensions to load/unload.
          $ref: '#/components/schemas/sqlrpc.v1.ExtensionList'
        pragmas:
          title: pragmas
          description: Partial map of PRAGMAs to modify.
          $ref: '#/components/schemas/sqlrpc.v1.PragmaMap'
        maxOpenConns:
          type:
            - integer
            - "null"
          title: max_open_conns
          format: int32
          description: New limit for concurrent connections.
        maxIdleConns:
          type:
            - integer
            - "null"
          title: max_idle_conns
          format: int32
          description: New limit for idle connections in the pool.
        connMaxLifetimeMs:
          type:
            - integer
            - "null"
          title: conn_max_lifetime_ms
          format: int32
          description: New lifetime limit for physical connections.
        initCommands:
          title: init_commands
          description: New list of initialization SQL commands.
          $ref: '#/components/schemas/sqlrpc.v1.InitCommandList'
        attachments:
          title: attachments
          description: New collection of database attachments.
          $ref: '#/components/schemas/sqlrpc.v1.AttachmentList'
      title: UpdateDatabaseConfig
      additionalProperties: false
      description: |-
        *
         UpdateDatabaseConfig allows for non-destructive updates to a tenant's
         configuration on the fly.
    sqlrpc.v1.User:
      type: object
      properties:
        id:
          type:
            - integer
            - string
          title: id
          format: int64
          description: Primary key for the user identity.
        username:
          type: string
          title: username
          description: Unique identifier for the user.
        role:
          title: role
          description: RBAC permission tier assigned to the user.
          $ref: '#/components/schemas/sqlrpc.v1.Role'
      title: User
      additionalProperties: false
      description: |-
        *
         User represents a platform identity with role-based access controls.
security: []
